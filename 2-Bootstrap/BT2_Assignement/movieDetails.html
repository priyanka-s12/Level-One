<!DOCTYPE html>
<html>
  <head>
    <title>Movie Details</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  </head>

  <body>
    <header>
      <nav class="navbar navbar-expand-lg bg-light">
        <div class="container">
          <a href="index.html" class="navbar-brand fw-medium">Movie Database</a>

          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarNav"
            aria-controls="navbarNav"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>

          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
              <li class="nav-item">
                <a href="index.html" class="nav-link">Home</a>
              </li>
              <li class="nav-item">
                <a href="movies.html" class="nav-link">Movies</a>
              </li>
              <li class="nav-item">
                <a href="report.html" class="nav-link">Report</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </header>

    <main>
      <div class="container mt-3">
        <h2>Movie Details</h2>
      </div>

      <section id="movieDetail" class="container py-3"></section>
    </main>

    <!-- <footer class="bg-dark text-light py-3">
    <div class="container">
      <div class="text-center">
        <p>&copy; 2024 Company Name. All rights reserved.</p>
      </div>
    </div>
  </footer> -->

    <script>
      let movies = [
        {
          id: '1',
          movieName: 'Movie 1',
          genre: 'Action',
          details: 'This is an action-packed movie.',
          releaseDate: '2024-01-15',
          director: 'John Doe',
        },
        {
          id: '2',
          movieName: 'Movie 2',
          genre: 'Drama',
          details: 'A dramatic story unfolds in this movie.',
          releaseDate: '2025-02-20',
          director: 'Jane Smith',
        },
        {
          id: '3',
          movieName: 'Movie 3',
          genre: 'Comedy',
          details: 'Get ready to laugh with this comedy.',
          releaseDate: '2024-03-25',
          director: 'Jane Walk',
        },
      ];

      //1st get the id from url
      function getMovieId(id) {
        let url = new URL(window.location.href);

        return url.searchParams.get(id);
      }

      let movieId = getMovieId('id');

      //2nd fetch that id's data from db
      let movieObj;
      for (let i = 0; i < movies.length; i++) {
        if (movies[i].id === movieId) {
          movieObj = movies[i];
        }
      }
      // console.log(movieObj)

      //3rd display that object data on the page
      let movieDetailElement = document.getElementById('movieDetail');
      // console.log(movieDetailElement)
      if (movieObj) {
        movieDetailElement.innerHTML = `
      <div class="card">
        <div class="card-header">
          <h3>${movieObj.movieName}</h3>
        </div>
        <div class="card-body">
          <p><strong>Genre: </strong>${movieObj.genre}</p>
          <p><strong>Details: </strong>${movieObj.details}</p>
          <p><strong>Release Date: </strong>${movieObj.releaseDate}</p>
          <p><strong>Director: </strong>${movieObj.director}</p>
        </div>
        </div>
        `;
      } else {
        movieDetailElement.innerHTML = `<p> Movie not found.</p>`;
      }
    </script>
  </body>
</html>
